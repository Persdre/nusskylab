!function(b){"use strict";var g=b.tablesorter||{};g.filterFormatter=g.filterFormatter||{},g.filterFormatter.select2=function(l,t,e){var a,i,n=b.extend({cellText:"",match:!0,value:"",multiple:!0,width:"100%"},e),c=l.closest("table")[0].config,s=c.widgetOptions,r=b('<input class="filter" type="hidden">').appendTo(l).bind("change"+c.namespace+"filter",function(){var e=this.value;e=e.replace(/[/()$^]/g,"").split("|"),l.find(".select2").select2("val",e),v()}),d=c.$headerIndexed[t],f=d.hasClass(s.filter_onlyAvail),o=[],p=n.match?"":"^",u=n.match?"":"$",v=function(){var e=!1,t=l.find(".select2").select2("val")||n.value||"";b.isArray(t)&&(e=!0,t=t.join("\0")),t=t.replace(/[-[\]{}()*+?.,/\\^$|#\s]/g,"\\$&"),e&&(t=t.split("\0")),r.val(b.isArray(t)&&t.length&&""!==t.join("")?"/("+p+(t||[]).join(u+"|"+p)+u+")/":"").trigger("search").end().find(".select2").select2("val",t),o.length&&o.find(".select2").select2("val",t)},h=function(){i=[],a=g.filter.getOptionSource(c.$table[0],t,f)||[],b.each(a,function(e,t){i.push({id:t,text:t})}),n.data=i};return d.toggleClass("filter-match",n.match),n.cellText&&l.prepend("<label>"+n.cellText+"</label>"),n.ajax&&!b.isEmptyObject(n.ajax)||n.data||(h(),f&&c.$table.bind("filterEnd",function(){h(),l.add(o).find(".select2").select2(n)})),b('<input class="select2 select2-'+t+'" type="hidden" />').val(n.value).appendTo(l).select2(n).bind("change",function(){v()}),c.$table.bind("filterFomatterUpdate",function(){var e=c.$table.data("lastSearch")[t]||"";e=e.replace(/^\/\(\^?/,"").replace(/\$\|\^/g,"|").replace(/\$?\)\/$/g,"").split("|"),l.find(".select2").select2("val",e),v(),g.filter.formatterUpdated(l,t)}),c.$table.bind("stickyHeadersInit",function(){o=c.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(t).empty(),b('<input class="select2 select2-'+t+'" type="hidden">').val(n.value).appendTo(o).select2(n).bind("change",function(){l.find(".select2").select2("val",o.find(".select2").select2("val")),v()}),n.cellText&&o.prepend("<label>"+n.cellText+"</label>")}),c.$table.bind("filterReset",function(){l.find(".select2").select2("val",n.value||""),setTimeout(function(){v()},0)}),v(),r}}(jQuery);