!function(_){"use strict";var r=_.tablesorter;r.alignChar={init:function(i,t,e){t.$headers.filter("["+e.alignChar_charAttrib+"]").each(function(){var n=_(this),a={column:this.column,align:n.attr(e.alignChar_charAttrib),alignIndex:parseInt(n.attr(e.alignChar_indexAttrib)||0,10),adjust:parseFloat(n.attr(e.alignChar_adjustAttrib))||0};a.regex=new RegExp("\\"+a.align,"g"),"undefined"!=typeof a.align&&(e.alignChar_savedVars[this.column]=a,r.alignChar.setup(i,t,e,a))})},setup:function(n,a,i,t){if(!_.isEmptyObject(a.cache)){var e,r,l,h,g,o,s,d,c,u,f,m,p,C,w=[],b=[];for(e=0;e<a.$tbodies.length;e++)for(u=(s=a.cache[e]).normalized.length,r=0;r<u;r++){if(0<(c=((d=(C=s.row?s.row[r]:s.normalized[r][a.columns].$row).find("td").eq(t.column).text().replace(/[ ]/g,"\xa0")).match(t.regex)||[]).length)&&0<t.alignIndex)for(h=Math.min(t.alignIndex,c),g=o=l=0;l++<h;)o=(g=d.indexOf(t.align,g+1))<0?o:g;else o=d.indexOf(t.align);0<=o?(w.push(d.substring(0,o)||""),b.push(d.substring(o,d.length)||"")):(w.push(1<=c&&t.alignIndex>=c?"":d||""),b.push(1<=c&&t.alignIndex>=c&&d||""))}for(f=_.extend([],w).sort(function(n,a){return a.length-n.length})[0],m=_.extend([],b).sort(function(n,a){return a.length-n.length})[0],t.width=t.width||Math.floor(f.length/(f.length+m.length)*100)+t.adjust,f="min-width:"+t.width+"%",m="min-width:"+(100-t.width)+"%",e=0;e<a.$tbodies.length;e++)for(u=(s=a.cache[e]).normalized.length,r=0;r<u;r++)p=_(i.alignChar_wrap).length?_(i.alignChar_wrap).html(t.align)[0].outerHTML:t.align,C=s.row?s.row[r]:s.normalized[r][a.columns].$row,g=b[r].slice(t.align.length),C.find("td").eq(t.column).html('<span class="ts-align-wrap"><span class="ts-align-left" style="'+f+'">'+w[r]+'</span><span class="ts-align-right" style="'+m+'">'+(g.length?p+g:"")+"</span></span>");i.alignChar_initialized=!0}},remove:function(n,a,i){var t,e,r,l,h;if(!_.isEmptyObject(a.cache))for(t=0;t<a.$tbodies.length;t++)for(r=(l=a.cache[t]).normalized.length,e=0;e<r;e++)(h=(l.row?l.row[e]:l.normalized[e][a.columns].$row).find("td").eq(i)).html(h.text().replace(/\s/g," "))}},r.addWidget({id:"alignChar",priority:100,options:{alignChar_wrap:"",alignChar_charAttrib:"data-align-char",alignChar_indexAttrib:"data-align-index",alignChar_adjustAttrib:"data-align-adjust"},init:function(n,a,i,t){t.alignChar_initialized=!1,t.alignChar_savedVars=[],r.alignChar.init(n,i,t),i.$table.on("pagerEnd refreshAlign",function(){i.$headers.filter("["+t.alignChar_charAttrib+"]").each(function(){r.alignChar.remove(n,i,this.column)}),r.alignChar.init(n,i,t)})},format:function(n,a,i){i.alignChar_initialized||a.$table.trigger("refreshAlign")},remove:function(n,a,i,t){t||(a.$headers.filter("["+i.alignChar_charAttrib+"]").each(function(){r.alignChar.remove(n,a,this.column)}),i.alignChar_initialized=!1)}})}(jQuery);