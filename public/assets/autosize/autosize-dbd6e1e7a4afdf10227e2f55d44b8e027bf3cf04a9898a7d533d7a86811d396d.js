!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(i){function e(){var e=window.getComputedStyle(i,null);"vertical"===e.resize?i.style.resize="none":"both"===e.resize&&(i.style.resize="horizontal"),s="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(s)&&(s=0),n()}function d(e){var t=i.style.width;i.style.width="0px",i.offsetWidth,i.style.width=t,i.style.overflowY=e}function r(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function l(){var e=i.style.height,t=r(i),n=document.documentElement&&document.documentElement.scrollTop;i.style.height="auto";var o=i.scrollHeight+s;0!==i.scrollHeight?(i.style.height=o+"px",u=i.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)):i.style.height=e}function n(){l();var e=Math.round(parseFloat(i.style.height)),t=window.getComputedStyle(i,null),n="content-box"===t.boxSizing?Math.round(parseFloat(t.height)):i.offsetHeight;if(n!==e?"hidden"===t.overflowY&&(d("scroll"),l(),n="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight):"hidden"!==t.overflowY&&(d("hidden"),l(),n="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight),a!==n){a=n;var o=f("autosize:resized");try{i.dispatchEvent(o)}catch(r){}}}if(i&&i.nodeName&&"TEXTAREA"===i.nodeName&&!p.has(i)){var s=null,u=i.clientWidth,a=null,o=function(){i.clientWidth!==u&&n()},c=function(t){window.removeEventListener("resize",o,!1),i.removeEventListener("input",n,!1),i.removeEventListener("keyup",n,!1),i.removeEventListener("autosize:destroy",c,!1),i.removeEventListener("autosize:update",n,!1),Object.keys(t).forEach(function(e){i.style[e]=t[e]}),p["delete"](i)}.bind(i,{height:i.style.height,resize:i.style.resize,overflowY:i.style.overflowY,overflowX:i.style.overflowX,wordWrap:i.style.wordWrap});i.addEventListener("autosize:destroy",c,!1),"onpropertychange"in i&&"oninput"in i&&i.addEventListener("keyup",n,!1),window.addEventListener("resize",o,!1),i.addEventListener("input",n,!1),i.addEventListener("autosize:update",n,!1),i.style.overflowX="hidden",i.style.wordWrap="break-word",p.set(i,{destroy:c,update:n}),e()}}function o(e){var t=p.get(e);t&&t.destroy()}function r(e){var t=p.get(e);t&&t.update()}var i,d,p="function"==typeof Map?new Map:(i=[],d=[],{has:function(e){return-1<i.indexOf(e)},get:function(e){return d[i.indexOf(e)]},set:function(e,t){-1===i.indexOf(e)&&(i.push(e),d.push(t))},"delete":function(e){var t=i.indexOf(e);-1<t&&(i.splice(t,1),d.splice(t,1))}}),f=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(s){f=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=l});